<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui"
	template="/resources/decorator.xhtml">

	<ui:define name="title">
		<h:outputText value="#{msgs['managePublications.title.create']}"
			rendered="#{(! managePublicationsController.readOnly) and (managePublicationsController.selectedEntity.id == null)}" />
		<h:outputText value="#{msgs['managePublications.title.update']}"
			rendered="#{(! managePublicationsController.readOnly) and (managePublicationsController.selectedEntity.id != null)}" />
		<h:outputText value="#{msgs['managePublications.title.retrieve']}"
			rendered="#{managePublicationsController.readOnly}" />

	</ui:define>

	<ui:define name="body">

		<div id="formularioCadastro">
			<h:panelGroup>
				<h1>
					<h:outputText value="#{msgs['managePublications.title.create']}"
						rendered="#{(! managePublicationsController.readOnly) and (managePublicationsController.selectedEntity.id == null)}" />
					<h:outputText value="#{msgs['managePublications.title.update']}"
						rendered="#{(! managePublicationsController.readOnly) and (managePublicationsController.selectedEntity.id != null)}" />
					<h:outputText value="#{msgs['managePublications.title.retrieve']}"
						rendered="#{managePublicationsController.readOnly}" />

				</h1>

				<!-- The register form. -->
				<ui:decorate template="/resources/form.xhtml">
					<h:form id="form">
						<p:focus />

						 <h:panelGroup id="titleField">
							<ui:decorate template="/resources/formfield.xhtml">
								<ui:param name="fieldTitle" value="form:title" />
								<ui:define name="label">
									<h:outputText value="#{msgs['managePublications.form.title']}" />
								</ui:define>
								<b:inputText id="title"
									value="#{managePublicationsController.selectedEntity.title}"
									size="500" required="true" style="width:800px;"
									requiredMessage="#{msgs['crud.required.field']}">
									<p:ajax event="blur" update="titleField" />
								</b:inputText>
							</ui:decorate>
						</h:panelGroup> 

						<h:panelGroup id="typeField">
							<ui:decorate template="/resources/formfield.xhtml">
								<ui:param name="fieldName" value="form:typePublication" />
								<ui:define name="label">
									<h:outputText
										value="#{msgs['managePublications.form.publicationType']}" />
								</ui:define>
								<p:selectOneMenu id="typePublication"
									value="#{managePublicationsController.selectedEntity.type}"
									required="true" styleClass="selectOne"
									disabled="#{managePublicationsController.readOnly}"
									converter="publicationTypeConverter"
									requiredMessage="#{msgs['crud.required.field']}" style="width:150px">
									<f:selectItems value="#{publicationTypeController.publicationTypes}" />
									<p:ajax event="blur" update="typeField" />
								</p:selectOneMenu>
							</ui:decorate>
						</h:panelGroup>

						<h:panelGroup id="yearField">
							<ui:decorate template="/resources/formfield.xhtml">
								<ui:param name="yearName" value="form:year" />
								<ui:define name="label">
									<h:outputText value="#{msgs['managePublications.form.year']}" />
								</ui:define>
								<b:inputText id="year"
									value="#{managePublicationsController.year}"
									size="20" disabled="false" required="true" style="width:80px;"
									requiredMessage="#{msgs['crud.required.field']}">
									<p:ajax event="blur" update="yearField" />
									<f:facet name="prepend">
										<b:iconAwesome name="calendar" />
									</f:facet>
								</b:inputText>
							</ui:decorate>
						</h:panelGroup>

						<h:form enctype="multipart/form-data">
							
							<p:fileUpload 	fileUploadListener="#{managePublicationsController.uploadAction}" auto="true" mode="advanced"
								skinSimple="true" label="Selecionar" allowTypes="*.pdf;" required="true" update="messages" sizeLimit="100000"  
								multiple="false" requiredMessage="#{msgs['crud.required.field']}"/>
								<p:growl id="messages" showDetail="true" />
						</h:form>

						<h:panelGroup id="abstractField">
							<ui:decorate template="/resources/formfield.xhtml">
								<ui:param name="fieldAbstract" value="form:abstract" />
								<ui:define name="label">
									<h:outputText
										value="#{msgs['managePublications.form.abstract']}" />
								</ui:define>
								<h:inputTextarea id="abstract"
									value="#{managePublicationsController.selectedEntity.abstract}"
									size="5000" required="true" span="6" rows="5" style="width:500px;"
									requiredMessage="#{msgs['crud.required.field']}" >
									<!-- <p:ajax event="blur" update="abstractField" /> -->
								</h:inputTextarea>
							</ui:decorate>
						</h:panelGroup>
						
						
						<h:panelGroup id="referenceField">
							<ui:decorate template="/resources/formfield.xhtml">
								<ui:param name="fieldReference" value="form:reference" />
								<ui:define name="label">
									<h:outputText value="#{msgs['managePublications.form.reference']}" />
								</ui:define>
								<h:inputTextarea id="reference"
									value="#{managePublicationsController.selectedEntity.reference}"
									size="1000" required="true" span="6" rows="3" style="width:500px;"
									requiredMessage="#{msgs['crud.required.field']}">
									<!-- <p:ajax event="blur" update="referenceField" /> -->
								</h:inputTextarea>
							</ui:decorate>
						</h:panelGroup>
						

					 	<h:form id="isByNemo" requiredMessage="#{msgs['crud.required.field']}" required="true">
							<b:selectBooleanCheckbox value="#{managePublicationsController.nemo}"
								caption="NEMO" />
							<b:selectBooleanCheckbox value="#{managePublicationsController.outro}"
								caption="Outro" />	
						</h:form> 

						<h1></h1>

						<ui:decorate template="/resources/formbutton.xhtml">
							<b:commandButton action="#{managePublicationsController.save}"
								value="#{msgs['button.save']}" update=":globalMessages form" look="success"
								icon="ok" ajax="true" style="width:200px;"/>

							<b:commandButton ajax="false" value="#{msgs['button.cancel']}"
								action="#{managePublicationsController.list}" icon="remove" look="danger"/>

						</ui:decorate>

					</h:form>
				</ui:decorate>
			</h:panelGroup>
		</div>

	</ui:define>

</ui:composition>
